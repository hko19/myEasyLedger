{"ast":null,"code":"import _slicedToArray from \"/Users/kyle/Easy_Ledger/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/kyle/Easy_Ledger/front_end/src/components/table/table-of-journal-entries.jsx\";\nimport React from 'react';\nimport { useTable, usePagination } from 'react-table';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport LineItemTable from './line-item-table';\nimport LineItemForm from './line-item-form'; //Generates a table with react-table 7 using pagination\n// Let's add a fetchData method to our Table component that will be used to fetch\n// new data when pagination state changes\n// We can also add a loading state to let our table know it's loading new data\n\nfunction TableOfJournalEntries(_ref) {\n  var _this = this;\n\n  var columns = _ref.columns,\n      data = _ref.data,\n      fetchData = _ref.fetchData,\n      controlledPageCount = _ref.pageCount,\n      elementCount = _ref.elementCount,\n      organizationId = _ref.organizationId,\n      API_URL = _ref.API_URL;\n\n  var _useTable = useTable({\n    columns,\n    data,\n    initialState: {\n      pageIndex: 0,\n      pageSize: 10\n    },\n    // Pass our hoisted table state\n    manualPagination: true,\n    // Tell the usePagination\n    // hook that we'll handle our own data fetching\n    // This means we'll also have to provide our own\n    // pageCount.\n    pageCount: controlledPageCount\n  }, usePagination),\n      getTableProps = _useTable.getTableProps,\n      getTableBodyProps = _useTable.getTableBodyProps,\n      headerGroups = _useTable.headerGroups,\n      prepareRow = _useTable.prepareRow,\n      page = _useTable.page,\n      canPreviousPage = _useTable.canPreviousPage,\n      canNextPage = _useTable.canNextPage,\n      pageOptions = _useTable.pageOptions,\n      pageCount = _useTable.pageCount,\n      gotoPage = _useTable.gotoPage,\n      nextPage = _useTable.nextPage,\n      previousPage = _useTable.previousPage,\n      setPageSize = _useTable.setPageSize,\n      _useTable$state = _useTable.state,\n      pageIndex = _useTable$state.pageIndex,\n      pageSize = _useTable$state.pageSize;\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      journalEntryExpanded = _React$useState2[0],\n      setJournalEntryExpanded = _React$useState2[1]; //Whether or not the modal  is shown\n\n\n  var toggleJournalEntryExpanded = function toggleJournalEntryExpanded() {\n    return setJournalEntryExpanded(!journalEntryExpanded);\n  }; //Toggles modal on or off\n\n\n  var _React$useState3 = React.useState([]),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      lineItemData = _React$useState4[0],\n      setLineItemData = _React$useState4[1]; //Data to be passed in to lineItemTable\n\n\n  var expandJournalEntry = function expandJournalEntry(i) {\n    fetchJournalEntry(i);\n    toggleJournalEntryExpanded();\n  };\n\n  var _React$useState5 = React.useState(),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      journalEntryDescription = _React$useState6[0],\n      setJournalEntryDescription = _React$useState6[1];\n\n  var _React$useState7 = React.useState('no'),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      journalEntryDate = _React$useState8[0],\n      setJournalEntryDate = _React$useState8[1];\n\n  var _React$useState9 = React.useState([]),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      categories = _React$useState10[0],\n      setCategories = _React$useState10[1];\n\n  var _React$useState11 = React.useState([]),\n      _React$useState12 = _slicedToArray(_React$useState11, 2),\n      accounts = _React$useState12[0],\n      setAccounts = _React$useState12[1];\n\n  var fetchJournalEntry = function fetchJournalEntry(i) {\n    var url = \"\".concat(API_URL, \"/journalEntry/\").concat(i);\n    axios.get(url).then(function (response) {\n      var journalEntry = response.data;\n      var formattedLineItems = [];\n      journalEntry.lineItems.forEach(function (lineItem) {\n        var formattedLineItem = {\n          lineItemId: lineItem.lineItemId,\n          accountName: lineItem.accountName,\n          description: lineItem.description,\n          debitAmount: lineItem.isCredit ? null : lineItem.amount.toFixed(2),\n          creditAmount: lineItem.isCredit ? lineItem.amount.toFixed(2) : null,\n          categoryName: lineItem.categoryName\n        };\n        formattedLineItems.push(formattedLineItem);\n      });\n      setLineItemData(formattedLineItems);\n      setJournalEntryDescription(journalEntry.description);\n      setJournalEntryDate(journalEntry.journalEntryDate);\n    }).catch(console.log);\n  };\n\n  var fetchCategoriesAndAccounts = function fetchCategoriesAndAccounts(i) {\n    axios.get(\"\".concat(props.API_URL, \"/organization/\").concat(i, \"/category\")).then(function (response) {\n      var categories = response.data;\n      setCategories(categories);\n    }).catch(console.log);\n    axios.get(\"\".concat(props.API_URL, \"/organization/\").concat(i, \"/account\")).then(function (response) {\n      var accounts = response.data;\n      setAccounts(accounts);\n    });\n  }; // Listen for changes in pagination and use the state to fetch our new data\n\n\n  React.useEffect(function () {\n    fetchData({\n      pageIndex,\n      pageSize\n    });\n  }, [fetchData, pageIndex, pageSize]);\n  React.useEffect(function () {\n    fetchCategoriesAndAccounts(organizationId);\n  }); // Render the UI for your table\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-responsive\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", Object.assign({\n    className: \"table table-hover m-b-0 text-inverse\"\n  }, getTableProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, headerGroups.map(function (headerGroup) {\n    return /*#__PURE__*/React.createElement(\"tr\", Object.assign({}, headerGroup.getHeaderGroupProps(), {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    }), headerGroup.headers.map(function (column) {\n      return /*#__PURE__*/React.createElement(\"th\", Object.assign({}, column.getHeaderProps(), {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 17\n        }\n      }), column.render('Header'), /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 19\n        }\n      }, column.isSorted ? column.isSortedDesc ? ' ðŸ”½' : ' ðŸ”¼' : ''));\n    }));\n  })), /*#__PURE__*/React.createElement(\"tbody\", Object.assign({}, getTableBodyProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }), page.map(function (row, i) {\n    prepareRow(row);\n    return /*#__PURE__*/React.createElement(\"tr\", Object.assign({\n      style: {\n        cursor: \"pointer\"\n      },\n      onClick: function onClick() {\n        return expandJournalEntry(data[i].journalEntryId);\n      }\n    }, row.getRowProps(), {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 15\n      }\n    }), row.cells.map(function (cell) {\n      return /*#__PURE__*/React.createElement(\"td\", Object.assign({}, cell.getCellProps(), {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 26\n        }\n      }), cell.render('Cell'));\n    }));\n  }))), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: journalEntryExpanded,\n    toggle: function toggle() {\n      return toggleJournalEntryExpanded();\n    },\n    size: \"lg\",\n    style: {\n      maxWidth: '1600px',\n      width: '80%',\n      margin: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    toggle: function toggle() {\n      return toggleJournalEntryExpanded();\n    },\n    className: \"bg-dark text-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  }, \"Journal Entry\"), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(LineItemForm, {\n    data: lineItemData,\n    journalEntryDate: journalEntryDate,\n    journalEntryDescription: journalEntryDescription,\n    organizationId: organizationId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }, \"Action\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-white\",\n    onClick: function onClick() {\n      return toggleJournalEntryExpanded();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }, \"Close\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row px-3 py-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"pager m-t-0 m-b-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: canPreviousPage ? \"previous\" : \"previous disabled\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 21\n    }\n  }, canPreviousPage ? /*#__PURE__*/React.createElement(Link, {\n    onClick: function onClick() {\n      return previousPage();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 43\n    }\n  }, \"\\u2190 Newer\") : null)), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"py-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  }, \"Showing \", pageIndex * page.length + 1 + \"-\" + (pageIndex + 1) * page.length, \" of \", elementCount, ' ', \"results\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"pager m-t-0 m-b-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: canNextPage ? \"next\" : \"next disabled\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 21\n    }\n  }, canNextPage ? /*#__PURE__*/React.createElement(Link, {\n    onClick: function onClick() {\n      return nextPage();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 39\n    }\n  }, \"Older \\u2192\") : null))));\n}\n\nexport default TableOfJournalEntries;","map":{"version":3,"sources":["/Users/kyle/Easy_Ledger/front_end/src/components/table/table-of-journal-entries.jsx"],"names":["React","useTable","usePagination","Modal","ModalHeader","ModalBody","ModalFooter","Link","axios","LineItemTable","LineItemForm","TableOfJournalEntries","columns","data","fetchData","controlledPageCount","pageCount","elementCount","organizationId","API_URL","initialState","pageIndex","pageSize","manualPagination","getTableProps","getTableBodyProps","headerGroups","prepareRow","page","canPreviousPage","canNextPage","pageOptions","gotoPage","nextPage","previousPage","setPageSize","state","useState","journalEntryExpanded","setJournalEntryExpanded","toggleJournalEntryExpanded","lineItemData","setLineItemData","expandJournalEntry","i","fetchJournalEntry","journalEntryDescription","setJournalEntryDescription","journalEntryDate","setJournalEntryDate","categories","setCategories","accounts","setAccounts","url","get","then","response","journalEntry","formattedLineItems","lineItems","forEach","lineItem","formattedLineItem","lineItemId","accountName","description","debitAmount","isCredit","amount","toFixed","creditAmount","categoryName","push","catch","console","log","fetchCategoriesAndAccounts","props","useEffect","map","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","render","isSorted","isSortedDesc","row","cursor","journalEntryId","getRowProps","cells","cell","getCellProps","maxWidth","width","margin","length"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useTable, usePagination } from 'react-table'\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport LineItemTable from './line-item-table';\nimport LineItemForm from './line-item-form';\n\n//Generates a table with react-table 7 using pagination\n\n// Let's add a fetchData method to our Table component that will be used to fetch\n// new data when pagination state changes\n// We can also add a loading state to let our table know it's loading new data\nfunction TableOfJournalEntries({\n  columns,\n  data,\n  fetchData,\n  pageCount: controlledPageCount,\n  elementCount,\n  organizationId,\n  API_URL\n}) {\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    prepareRow,\n    page,\n    canPreviousPage,\n    canNextPage,\n    pageOptions,\n    pageCount,\n    gotoPage,\n    nextPage,\n    previousPage,\n    setPageSize,\n    // Get the state from the instance\n    state: { pageIndex, pageSize},\n  } = useTable(\n    {\n      columns,\n      data,\n      initialState: { pageIndex: 0, pageSize: 10 }, // Pass our hoisted table state\n      manualPagination: true, // Tell the usePagination\n      // hook that we'll handle our own data fetching\n      // This means we'll also have to provide our own\n      // pageCount.\n      pageCount: controlledPageCount,\n    },\n    usePagination\n  )\n\n  const [journalEntryExpanded, setJournalEntryExpanded] = React.useState(false); //Whether or not the modal  is shown\n  const toggleJournalEntryExpanded = () => setJournalEntryExpanded(!journalEntryExpanded); //Toggles modal on or off\n  const [lineItemData, setLineItemData] = React.useState([]); //Data to be passed in to lineItemTable\n  const expandJournalEntry = i => {\n    fetchJournalEntry(i);\n    toggleJournalEntryExpanded();\n  }\n  const [journalEntryDescription, setJournalEntryDescription] = React.useState();\n  const [journalEntryDate, setJournalEntryDate] = React.useState('no');\n  const [categories, setCategories] = React.useState([]);\n  const [accounts, setAccounts] = React.useState([]);\n  \n  const fetchJournalEntry = i => {\n    const url = `${API_URL}/journalEntry/${i}`;\n    axios.get(url).then(response => {\n        var journalEntry = response.data;\n        var formattedLineItems = [];\n        journalEntry.lineItems.forEach( lineItem => {\n          var formattedLineItem = {\n            lineItemId: lineItem.lineItemId,\n            accountName: lineItem.accountName,\n            description: lineItem.description,\n            debitAmount: (lineItem.isCredit ? null : lineItem.amount.toFixed(2)),\n            creditAmount: (lineItem.isCredit ? lineItem.amount.toFixed(2) : null),\n            categoryName: lineItem.categoryName\n          };\n          formattedLineItems.push(formattedLineItem);\n        })\n        setLineItemData(formattedLineItems);\n        setJournalEntryDescription(journalEntry.description);\n        setJournalEntryDate(journalEntry.journalEntryDate);\n      })\n      .catch(console.log);\n  }\n\n  const fetchCategoriesAndAccounts = i => {\n    axios.get(`${props.API_URL}/organization/${i}/category`).then(response => {\n      const categories = response.data;\n      setCategories(categories);\n    })\n    .catch(console.log);\n    axios.get(`${props.API_URL}/organization/${i}/account`).then(response => {\n      const accounts = response.data;\n      setAccounts(accounts);\n    })\n  }\n\n  // Listen for changes in pagination and use the state to fetch our new data\n  React.useEffect(() => {\n    fetchData({ pageIndex, pageSize })\n  }, [fetchData, pageIndex, pageSize])\n\n  React.useEffect(() => {\n    fetchCategoriesAndAccounts(organizationId);\n  })\n\n  // Render the UI for your table\n  return (\n    <><div className=\"table-responsive\">\n      <table  className=\"table table-hover m-b-0 text-inverse\" {...getTableProps()}>\n        <thead>\n          {headerGroups.map(headerGroup => (\n            <tr {...headerGroup.getHeaderGroupProps()}>\n              {headerGroup.headers.map(column => (\n                <th {...column.getHeaderProps()}>\n                  {column.render('Header')}\n                  <span>\n                    {column.isSorted\n                      ? column.isSortedDesc\n                        ? ' ðŸ”½'\n                        : ' ðŸ”¼'\n                      : ''}\n                  </span>\n                </th>\n              ))}\n            </tr>\n          ))}\n        </thead>\n        <tbody {...getTableBodyProps()}>\n          {page.map((row, i) => {\n            prepareRow(row)\n            return (\n              <tr style={{cursor: \"pointer\"}} onClick={() => expandJournalEntry(data[i].journalEntryId)} {...row.getRowProps()}>{/* entry is represented as a clickable row that opens a modal when clicked*/}\n                {row.cells.map(cell => {\n                  return <td {...cell.getCellProps()}>{cell.render('Cell')}</td>\n                })}\n              </tr>\n            )\n          })}\n        </tbody>\n      </table>\n\n      {/* Modal that opens when a row in the table is clicked */}\n      <Modal isOpen={journalEntryExpanded} toggle={() => toggleJournalEntryExpanded()}size=\"lg\" style={{maxWidth: '1600px', width: '80%', margin: 'auto'}}>\n          <ModalHeader toggle={() => toggleJournalEntryExpanded()} className=\"bg-dark text-white\">Journal Entry</ModalHeader>\n          <ModalBody>\n            <LineItemForm data={lineItemData} journalEntryDate={journalEntryDate} journalEntryDescription={journalEntryDescription} organizationId={organizationId}></LineItemForm>\n          </ModalBody>\n          <ModalFooter>\n            <button className=\"btn btn-primary\">Action</button>\n            <button className=\"btn btn-white\" onClick={() => toggleJournalEntryExpanded()}>Close</button>\n          </ModalFooter>\n      </Modal>\n\n      </div>\n      {/* \n        Pagination can be built however you'd like. \n        This is just a very basic UI implementation:\n      */}\n    <div className=\"row px-3 py-2\">\n        {/*<span >\n            <button className=\"btn btn-white \" onClick={() => gotoPage(0)} disabled={!canPreviousPage}>\n                {'First'}\n            </button>{' '}\n            <button className=\"btn btn-white\" onClick={() => previousPage()} disabled={!canPreviousPage}>\n                {'Previous'}\n            </button>{' '}\n            <button className=\"btn btn-white\" onClick={() => nextPage()} disabled={!canNextPage}>\n                {'Next'}\n            </button>{' '}\n            <button className=\"btn btn-white\" onClick={() => gotoPage(pageCount - 1)} disabled={!canNextPage}>\n                {'Last'}\n            </button>{' '}\n        </span> */}\n        \n                <ul className=\"pager m-t-0 m-b-0\">\n                    <li className={canPreviousPage? \"previous\" : \"previous disabled\"}>\n                        {canPreviousPage? <Link onClick={() => previousPage()}>&larr; Newer</Link> : null} \n                    </li>\n                </ul>\n                <span className=\"py-2\">\n                    Showing {((pageIndex * page.length) + 1) + \"-\" + ((pageIndex + 1) * page.length)} of {elementCount}{' '}\n                    results\n                </span>\n                <ul className=\"pager m-t-0 m-b-0\">\n                    <li className={canNextPage? \"next\" : \"next disabled\"}>\n                        {canNextPage? <Link onClick={() => nextPage()}>Older &rarr;</Link> : null}\n                    </li>\n                </ul>\n                \n        \n\n        {/* <span className=\"p-10\" style={{textAlign: \"center\"}}>\n            Page{' '}\n            <strong>\n                {pageIndex + 1} of {pageOptions.length}\n            </strong>{' '}\n         </span> */}\n\n        {/*go to page, page size*/}\n        {/*<span className=\"p-10\">\n            Go to page: {' '}\n            <input className=\"p-10 form-control-sm\"\n                type=\"number\"\n                defaultValue={pageIndex + 1}\n                onChange={e => {\n                const page = e.target.value ? Number(e.target.value) - 1 : 0\n                gotoPage(page)\n                }}\n            /> {' '}\n        </span>*/}\n\n\n\n    </div>\n\n    </>\n  )\n}\n\nexport default TableOfJournalEntries\n\n"]},"metadata":{},"sourceType":"module"}